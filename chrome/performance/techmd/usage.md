# Chrome标签页性能监控扩展使用指南

## 安装步骤

1. 克隆仓库并进入项目目录
```bash
cd chrome/performance
```

2. 安装依赖并构建扩展
```bash
bash install.bash
```

3. 在Chrome浏览器中加载扩展
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"（右上角开关）
   - 点击"加载已解压的扩展程序"
   - 选择项目的`dist`目录

## 功能介绍

### 内存监控

内存监控标签页提供以下功能：

1. **标签页内存使用排名**
   - 显示所有标签页的内存使用情况
   - 按内存使用量从高到低排序
   - 对可能存在内存泄漏的标签页进行警告标记

2. **内存使用趋势**
   - 点击任意标签页查看其内存使用历史趋势图
   - 同时显示DOM节点数量变化
   - 对异常情况进行高亮显示

3. **泄漏检测配置**
   - 自定义堆内存阈值（MB）
   - 设置增长率阈值（%/分钟）
   - 调整采样间隔（秒）
   - 配置DOM节点数量阈值

### 性能监控

性能监控标签页分为两个子标签：

1. **Web性能指标**
   - 核心Web指标（FCP、LCP、TTI、FID、INP、CLS）
   - 网络指标（DNS、TCP、SSL、TTFB、DCL）
   - 设备信息（设备类型、网络类型、内存、CPU核心数）

2. **帧率与卡顿**
   - 实时FPS监控
   - 卡顿率统计
   - 卡顿分类（小、中、大卡顿）
   - 事件响应延迟监控
   - 性能趋势图表

## 使用技巧

1. **内存泄漏诊断**
   - 观察内存使用趋势，持续上升可能表示存在内存泄漏
   - 结合DOM节点数量变化，节点数持续增长通常是DOM泄漏的迹象
   - 切换标签页或刷新页面后，内存应该有所释放，如果没有，可能存在泄漏

2. **性能优化**
   - FPS低于50可能导致用户感知到卡顿
   - 卡顿率超过10%需要关注
   - 事件响应延迟超过50ms会影响用户体验
   - 关注Core Web Vitals指标，特别是LCP和CLS

3. **配置调整**
   - 对于高性能设备，可适当提高阈值
   - 对于低端设备，可降低阈值以更早发现问题
   - 采样间隔建议保持在5秒以上，避免过度消耗资源

## 常见问题

1. **为什么某些网站无法获取内存数据？**
   - 某些网站的内容安全策略(CSP)可能会限制Performance API的使用
   - 在隐私浏览模式下，部分API可能受限

2. **为什么性能指标与Chrome DevTools显示不同？**
   - 扩展使用的是页面内JavaScript可访问的API，而DevTools有更多特权
   - 某些指标（如精确内存使用）在不同环境下可能有差异

3. **如何解决"无法连接到扩展程序"错误？**
   - 重新加载扩展
   - 确保标签页不是特权页面（如chrome://设置）

## 高级用法

1. **导出数据**
   - 右键点击图表可以保存为PNG图片
   - 未来版本将支持导出CSV格式的详细数据

2. **自动化监控**
   - 扩展会自动监控所有标签页
   - 发现异常时会发送桌面通知
   - 可在扩展配置中调整通知阈值